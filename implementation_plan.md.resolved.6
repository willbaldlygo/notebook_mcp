# NoteBook MCP: Server Implementation Plan

## Goal
Elevate the NotebookLM integration from a "cold-start" script to a "warm" **Model Context Protocol (MCP)** server. This will allow for instant queries, persistent browser sessions, and deeper integration with AI agents.

## User Review Required
> [!IMPORTANT]
> **New Dependency**: This implementation requires the `mcp` Python package. I will need permission to install it via pip: `pip install mcp`.

## Proposed Architecture

### 1. Core Logic Refactor (`notebooklm_core.py`)
Encapsulate the Playwright logic into a `NotebookLMSession` class.
- **Why?**: The current script opens/closes the browser for every single query. The Class will keep `self.browser` and `self.page` open between calls, making subsequent queries instantaneous.
- **Method**: `ensure_active_session()` checks if the browser is alive; if not, launches it.

### 2. MCP Server Entrypoint (`server.py`)
Implement the standard MCP protocol using the FastMCP SDK (or standard SDK).
- **Tool**: [query_notebook(url, question)](file:///Users/will/.gemini/antigravity/brain/6ac700d1-78b2-4ef1-81e7-d60101a71d0f/notebooklm_client.py#24-199) - The primary interaction.
- **Resource**: `notebooklm://active_session` - JSON status of the browser (is it open? logged in?).
- **Startup**: When the server starts, it silently launches the browser in the background and injects the cookies.

## Verification Plan

### Automated Test
Create a `test_mcp_client.py` that simulates an MCP client sending a JSON-RPC request to the server.
1.  Start `server.py` in background.
2.  Send `call_tool("query_notebook", ...)` request.
3.  Assert response contains valid text.

## Next Steps
1.  Approve this plan.
2.  Approve `pip install mcp`.
3.  Implementation.
